size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 24,
bg_color = background,
font_color = font_color
) +
draw_plot(legend, 0.2, .65, 0.2, 0.2) +
labs(
title="Accident rates with and without lighting",
subtitle="For Motorcycles, Bicycles, and Motorized Bicycles",
fill="Accidents",
caption="Data from CDOT | @hellville"
)
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
legend
# plot
ggplot()+
geom_sf(data = crash_counties,
mapping = aes(fill = bi_class),
color = "white",
size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 24,
bg_color = background,
font_color = font_color
) +
draw_plot(legend, 0.2, .65, 0.2, 0.2) +
labs(
title="Accident rates with and without lighting",
subtitle="For Motorcycles, Bicycles, and Motorized Bicycles",
fill="Accidents",
caption="Data from CDOT | @hellville"
)
# plot
map <- ggplot()+
geom_sf(data = crash_counties,
mapping = aes(fill = bi_class),
color = "white",
size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 24,
bg_color = background,
font_color = font_color
) +
draw_plot(legend, 0.2, .65, 0.2, 0.2) +
labs(
title="Accident rates with and without lighting",
subtitle="For Motorcycles, Bicycles, and Motorized Bicycles",
fill="Accidents",
caption="Data from CDOT | @hellville"
)
# legend + plot together at last
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend, 0.2, .65, 0.2, 0.2)
warnings()
# plot
map <- ggplot()+
geom_sf(data = crash_counties,
mapping = aes(fill = bi_class),
color = "white",
size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 15,
bg_color = background,
font_color = font_color
) +
labs(
title="Accident rates with and without lighting",
subtitle="For Motorcycles, Bicycles, and Motorized Bicycles",
fill="Accidents",
caption="Data from CDOT | @hellville"
)
# legend + plot together at last
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend, 0.2, .65, 0.2, 0.2)
# legend + plot together at last
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend, 0.2, .65, 0.2, 0.2)
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# legend + plot together at last
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend, -0.2, -.65, 0.2, 0.2)
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# legend + plot together at last
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend, 0, 0, 0.2, 0.2)
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
0,          # 0 = left side
.1,         # 0 = bottom
0.3,        # width
0.3)        # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
0,          # 0 = left side
0,         # 0 = bottom
0.3,        # width
0.3)        # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
-.1,          # 0 = left side
0,         # 0 = bottom
0.3,        # width
0.3)        # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
-.05,          # 0 = left side
0,         # 0 = bottom
0.3,        # width
0.3)        # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
-.06,          # 0 = left side
0,         # 0 = bottom
0.3,        # width
0.3)        # height
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
-.07,          # 0 = left side
0,             # 0 = bottom
0.3,           # width
0.3)           # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
-.09,          # 0 = left side
0,             # 0 = bottom
0.3,           # width
0.3)           # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
-.08,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
-.06,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# importing crash data as a tibble (did prep in Excel)
# https://oitco.hylandcloud.com/CDOTRMPop/docpop/docpop.aspx?clienttype=html&docid=8077600
crashes <- read_excel("CDOTRM_CD_Crash_Listing_-_2019.xlsx", sheet = 3)
# setting up the bivariate chloropleth
# for me https://cran.r-project.org/web/packages/biscale/vignettes/biscale.html
crashes_bucketed <- bi_class(crashes, x = Day, y = Night, style = "quantile", dim = 3)
# importing crash data as a tibble (did prep in Excel)
# https://oitco.hylandcloud.com/CDOTRMPop/docpop/docpop.aspx?clienttype=html&docid=8077600
crashes <- read_excel("CDOTRM_CD_Crash_Listing_-_2019.xlsx", sheet = 3)
# setting up the bivariate chloropleth
# for me https://cran.r-project.org/web/packages/biscale/vignettes/biscale.html
crashes_bucketed <- bi_class(crashes, x = Dark_unlightedlighted, y = Dark_lighted, style = "quantile", dim = 3)
# setting up the bivariate chloropleth
# for me https://cran.r-project.org/web/packages/biscale/vignettes/biscale.html
crashes_bucketed <- bi_class(crashes, x = Day, y = Night, style = "quantile", dim = 3)
# merging datasets (2020 updates to tibble package require updates to R and sf must be loaded)
crash_counties <- left_join(counties, crashes_bucketed, by=c("NAME"="Lookup_county"))
# legend
legend <- bi_legend(pal = "GrPink",
dim = 3,
xlab = "More daytime crashes",
ylab = "More lower light crashes",
size = 8)
# plot
map <- ggplot()+
geom_sf(data = crash_counties,
mapping = aes(fill = bi_class),
color = "white",
size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 24,
bg_color = background,
font_color = font_color
) +
labs(
title="Accident rates with and without lighting",
subtitle="For Motorcycles, Bicycles, and Motorized Bicycles",
fill="Accidents",
caption="Data from CDOT | @hellville"
)
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
-.06,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# plot
map <- ggplot()+
geom_sf(data = crash_counties,
mapping = aes(fill = bi_class),
color = "white",
size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 24,
bg_color = background,
font_color = font_color
) +
labs(
title="Accident rates with and without lighting",
subtitle="For Motorcycles, Bicycles, and Motorized Bicycles",
fill="Accidents",
caption="Crash Data from CDOT at https://www.codot.gov/safety/traffic-safety/safety-programs-data/crash-data /p
| @hellville"
)
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# plot
map <- ggplot()+
geom_sf(data = crash_counties,
mapping = aes(fill = bi_class),
color = "white",
size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 24,
bg_color = background,
font_color = font_color
) +
labs(
title="Motorcycle & Bicycle accident rates by day and dusk",
subtitle="For Motorcycles, Bicycles, and Motorized Bicycles on the Colorado Front Range",
fill="Accidents",
caption="Using 2019 Fatality Analysis Reporting Data from CDOT | @hellville"
)
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
-.06,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
-.06,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# plot
map <- ggplot()+
geom_sf(data = crash_counties,
mapping = aes(fill = bi_class),
color = "white",
size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 24,
bg_color = background,
font_color = font_color
) +
labs(
title="Motorcycle & Bicycle accident rates by lighting",
subtitle="For Motorcycles, Bicycles, and Motorized Bicycles on the CO Front Range",
fill="Accidents",
caption="Using 2019 Fatality Analysis Reporting Data from CDOT | @hellville"
)
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
-.06,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# plot
map <- ggplot()+
geom_sf(data = crash_counties,
mapping = aes(fill = bi_class),
color = "white",
size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 18,
bg_color = background,
font_color = font_color
) +
labs(
title="Motorcycle & Bicycle accident rates by lighting",
subtitle="For Motorcycles, Bicycles, and Motorized Bicycles on the CO Front Range",
fill="Accidents",
caption="Using 2019 Fatality Analysis Reporting Data from CDOT | @hellville"
)
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
-.06,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
# plot
map <- ggplot()+
geom_sf(data = crash_counties,
mapping = aes(fill = bi_class),
color = "white",
size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 18,
bg_color = background,
font_color = font_color
) +
labs(
title="Motorcycle & bicycle accident rates by time of day",
subtitle="For Counties in the Colorado Front Range",
fill="Accidents",
caption="Using 2019 Fatality Analysis Reporting Data from CDOT | @hellville"
)
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
-.06,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
0,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# plot
map <- ggplot()+
geom_sf(data = crash_counties,
mapping = aes(fill = bi_class),
color = "white",
size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 18,
bg_color = background,
font_color = font_color
) +
labs(
title="Motorcycle & bicycle accident rates by time of day",
subtitle="For counties in the Colorado Front Range",
fill="Accidents",
caption="Using 2019 Fatality Analysis Reporting Data from CDOT | @hellville"
)
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
0,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# plot
map <- ggplot()+
geom_sf(data = crash_counties,
mapping = aes(fill = bi_class),
color = "white",
size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 18,
bg_color = background,
font_color = font_color
) +
labs(
title="Motorcycle & bicycle accident rates by time of day",
subtitle="For counties of the Colorado Front Range",
fill="Accidents",
caption="Using 2019 Fatality Analysis Reporting Data from CDOT | @hellville"
)
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
0,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
# plot
map <- ggplot()+
geom_sf(data = crash_counties,
mapping = aes(fill = bi_class),
color = "white",
size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 18,
bg_color = background,
font_color = font_color
) +
labs(
title="Motorcycle & bicycle accident rates by time of day",
subtitle="For counties of the Colorado Front Range",
fill="Accidents",
caption="Using 2019 Statewide Crash Data Listings from CDOT | @hellville"
)
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
0,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
0,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
# plot
map <- ggplot()+
geom_sf(data = crash_counties,
mapping = aes(fill = bi_class),
color = "white",
size = 0.1,
show.legend = FALSE) +
bi_scale_fill(pal = "GrPink", dim = 3) +
bi_theme(
base_family = chart_font,
base_size = 18,
bg_color = background,
font_color = font_color
) +
labs(
title="Motorcycle & bicycle accident rates by time of day",
subtitle="For counties of the Colorado Front Range",
fill="Accidents",
caption="Using 2019 Statewide Crash Data Listings from CDOT | @hellville"
)
# legend + plot together at last - only visible upon ggsaving
final_plot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend,
0,          # 0 = left side
0,             # 0 = bottom
0.25,           # width
0.25)           # height
ggsave("crash_map.jpeg", width = 28.5, height = 15.6, units='cm')
